<div *ngIf="!model" fxLayout="column" fxLayoutAlign="center center" fxFlex>
    <mat-icon class="s-120 mb-12 select-todo-icon hint-text"
              [@animate]="{value:'*',params:{delay:'300ms',scale:'0.2'}}">check_box
    </mat-icon>
    <span class="hint-text mat-h1 select-todo-text" [@animate]="{value:'*',params:{delay:'400ms'}}">
        Выберите таблицу
    </span>
</div>

<div *ngIf="model">

    <div class="todo-header" fxLayout="row" fxLayoutAlign="space-between center">

        <button mat-button class="toggle-complete-button" (click)="toggleCompleted($event)"
                aria-label="Toggle completed" fxFlex="0 1 auto">
            <mat-icon *ngIf="true">check_box</mat-icon>
            <mat-icon *ngIf="false">check_box_outline_blank</mat-icon>
            <span class="ml-8">Mark as Done</span>
        </button>

        <div class="actions" fxLayout="row" fxLayoutAlign="start center">

            <button mat-icon-button (click)="toggleImportant($event)" aria-label="Toggle important">
                <mat-icon class="red-fg" *ngIf="true">error</mat-icon>
                <mat-icon class="secondary-text" *ngIf="false">error_outline</mat-icon>
            </button>

            <button mat-icon-button (click)="toggleStar($event)" aria-label="Toggle star">
                <mat-icon class="amber-fg" *ngIf="true">star</mat-icon>
                <mat-icon class="secondary-text" *ngIf="false">star_border</mat-icon>
            </button>

            <button mat-icon-button [matMenuTriggerFor]="labelMenu" fxFlex="0 1 auto">
                <mat-icon class="secondary-text">label</mat-icon>
            </button>

            <mat-menu #labelMenu="matMenu">
                <button mat-menu-item *ngFor="let tag of tags"
                        (click)="toggleTagOnTodo(tag.id)">
                    <mat-icon *ngIf="hasTag(tag.id)">check</mat-icon>
                    <mat-icon *ngIf="!hasTag(tag.id)"></mat-icon>
                    <span>{{tag.title}}</span>
                </button>
            </mat-menu>

            <button mat-icon-button (click)="toggleDeleted($event)" aria-label="Toggle delete">
                <mat-icon class="secondary-text" *ngIf="true">delete_forever</mat-icon>
                <mat-icon class="secondary-text" *ngIf="false">delete</mat-icon>
            </button>

        </div>
    </div>

    <div class="todo-content">

        <ng-container *ngIf="model">
            <ngx-datatable
                class="material"
                [columnMode]="'force'"
                [rows]="model.model"
                [columns]="columns"
                [headerHeight]="50"
                [footerHeight]="50"
                rowHeight="auto"
                [selectionType]="SelectionType"
                [sorts]="[]"
            >
                <ngx-datatable-column
                    [width]="5"
                    [draggable]="false"
                    name="drag_handle">
                    <ng-template let-column="column" ngx-datatable-header-template></ng-template>
                    <ng-template let-value="value" ngx-datatable-cell-template>
                        <mat-icon ngxDragHandle>
                            drag_handle
                        </mat-icon>
                    </ng-template>
                </ngx-datatable-column>

                <ngx-datatable-column
                    [width]="5"
                    [sortable]="false"
                    [draggable]="false"
                    [headerCheckboxable]="true"
                    [checkboxable]="true"
                >
                </ngx-datatable-column>

                <ngx-datatable-column
                    [width]="50"
                    [sortable]="true"
                    name="name">
                    <ng-template let-column="column" ngx-datatable-header-template>{{ column.name }} </ng-template>
                    <ng-template let-value="value" ngx-datatable-cell-template>
                        {{ value }}
                    </ng-template>
                </ngx-datatable-column>

                <ngx-datatable-column
                    [sortable]="true"
                    [width]="50"
                    name="type">
                    <ng-template let-column="column" ngx-datatable-header-template>{{ column.name }} </ng-template>
                    <ng-template let-value="value" ngx-datatable-cell-template>
                        {{ value }}
                    </ng-template>
                </ngx-datatable-column>

                <ngx-datatable-column
                    [sortable]="true"
                    [width]="30"
                    name="required_boolean">
                    <ng-template let-column="column" ngx-datatable-header-template>Обазятельное</ng-template>
                    <ng-template let-value="value" let-row="row" ngx-datatable-cell-template>
                        <mat-slide-toggle
                            class="mr-24"
                            [checked]="row.required_boolean"
                            (click)="toggle(row, 'required')">
                        </mat-slide-toggle>
                    </ng-template>
                </ngx-datatable-column>

                <ngx-datatable-column
                    [sortable]="true"
                    [width]="50"
                    name="title">
                    <ng-template let-column="column" ngx-datatable-header-template>{{ column.name }} </ng-template>
                    <ng-template let-value="value" ngx-datatable-cell-template>
                        {{ value }}
                    </ng-template>
                </ngx-datatable-column>

                <ngx-datatable-column
                    [sortable]="true"
                    [width]="20"
                    name="active">
                    <ng-template let-column="column" ngx-datatable-header-template>Доступ</ng-template>
                    <ng-template let-value="value" ngx-datatable-cell-template>
                        Всем
                    </ng-template>
                </ngx-datatable-column>

                <ngx-datatable-column
                    [sortable]="true"
                    [width]="20"
                    name="tab">
                    <ng-template let-column="column" ngx-datatable-header-template>Вкладка</ng-template>
                    <ng-template let-value="value" ngx-datatable-cell-template>
                        {{ value }}
                    </ng-template>
                </ngx-datatable-column>

                <ngx-datatable-column
                    [width]="70"
                    name="id">
                    <ng-template let-column="column" ngx-datatable-header-template></ng-template>
                    <ng-template let-value="value" ngx-datatable-cell-template>
                        <div fxLayout="row" fxLayoutAlign="start center">
                            <button mat-icon-button (click)="toggleDeleted($event)" aria-label="Toggle delete">
                                <mat-icon class="secondary-text">edit</mat-icon>
                            </button>
                            <button mat-icon-button (click)="toggleDeleted($event)" aria-label="Toggle delete">
                                <mat-icon class="secondary-text">delete</mat-icon>
                            </button>
                            <button mat-icon-button (click)="toggleDeleted($event)" aria-label="Toggle delete">
                                <mat-icon class="secondary-text">power_settings_new</mat-icon>
                            </button>
                        </div>
                    </ng-template>
                </ngx-datatable-column>

            </ngx-datatable>

        </ng-container>
    </div>
</div>
