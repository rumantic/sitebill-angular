<div id="course-dialog" class="dialog-content-wrapper">
    <mat-toolbar>
        <mat-toolbar-row fxFlex fxLayout="row" fxLayoutAlign="space-between center">
            <span class="title dialog-title">{{form_title}}</span>
            <button mat-icon-button (click)="close()" aria-label="Закрыть">
                <mat-icon>close</mat-icon>
            </button>
        </mat-toolbar-row>
    </mat-toolbar>

    <!--h2 mat-dialog-title>Объект</h2-->
    <div mat-dialog-content class="p-24 m-0">

        <div fxFlex="50"  fusePerfectScrollbar>
            <form class="example-container" [formGroup]="form" (ngSubmit)="save()">
                <ng-template #loggedOut>
                    <mat-spinner></mat-spinner>
                </ng-template>

                <div *ngIf="rows; else loggedOut">
                    <mat-tab-group dynamicHeight *ngIf="tabs_keys && form_inited">

                        <mat-tab *ngFor="let tab of tabs_keys" label="{{tab}}">

                            <table class="simple clickable data-table">
                                <tbody>
                                <tr *ngFor="let x of tabs[tab]">
                                    <td class="primary-50-bg data-table__cell data-table__cell_label" *ngIf="get_colspan(records[x].type, records[x].name) < 2">{{records[x].title}}</td>
                                    <td class="text-right data-table__cell data-table__cell_value" [attr.colspan]="get_colspan(records[x].type, records[x].name)">
                                        <ng-container *ngIf="records[x].value_string != '' && records[x].value_string != null">{{records[x].value_string}}</ng-container>
                                        <ng-container *ngIf="records[x].value_string == '' || records[x].value_string == null">
                                            <ng-container [ngSwitch]="records[x].type">
                                                <ng-container *ngSwitchCase="'checkbox'">
                                                    <mat-icon *ngIf="records[x].value == 1" class="active-icon green-600 s-16">check</mat-icon>
                                                    <mat-icon *ngIf="records[x].value == 0" class="active-icon red-500 s-16">close</mat-icon>
                                                </ng-container>

                                                <ng-container *ngSwitchCase="'uploads'">
                                                    {{records[x].title}}
                                                    <gallery-component *ngIf="galleryImages[records[x].name].length > 0" [galleryImages]="galleryImages" [entity]="_data" [image_field]="records[x].name"></gallery-component>
                                                </ng-container>
                                                <ng-container *ngSwitchCase="'textarea_editor'">
                                                    <div class="text-left">
                                                        {{records[x].title}}
                                                        <div [innerHTML]="records[x].value|safehtml"></div>
                                                    </div>
                                                </ng-container>
                                                <ng-container *ngSwitchCase="'geodata'">
                                                    {{records[x].title}} {{lat}},{{lng}}
                                                    <agm-map [latitude]="lat_center" [longitude]="lng_center">
                                                        <ng-container *ngIf="lat != '' && lng != ''">
                                                            <agm-marker [latitude]="lat" [longitude]="lng"></agm-marker>
                                                        </ng-container>
                                                    </agm-map>
                                                </ng-container>

                                                <ng-container *ngSwitchDefault>
                                                    <ng-container [ngSwitch]="records[x].name">
                                                        <ng-container  *ngSwitchCase="'youtube'">
                                                            {{records[x].title}}
                                                            <div [innerHTML]="get_youtube_code(records[x].value)|safehtml"></div>
                                                        </ng-container>
                                                        <ng-container *ngSwitchDefault>
                                                            {{records[x].value}}
                                                        </ng-container>
                                                    </ng-container>
                                                </ng-container>
                                            </ng-container>


                                        </ng-container>
                                    </td>
                                </tr>
                                </tbody>
                            </table>
                        </mat-tab>

                    </mat-tab-group>

                </div>

            </form>
        </div>
        <div fxFlex="50">
            <profile-timeline></profile-timeline>
        </div>
    </div>

</div>