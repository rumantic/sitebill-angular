<ng-template #hdrTpl let-column="column" >
    <filter-comp [columnName]=column.name>
    </filter-comp>        
</ng-template>

<ng-template #editTmpl let-row="row" let-value="value">
    <div *ngIf="value.length > 0">
        <img 
            width="50"
            src="http://genplan1/img/data/{{value[0].preview}}"
            />
    </div>
</ng-template>                                

<ng-template #clientControlTmpl let-row="row" let-value="value">
    <div class="actions" fxLayout="row" fxLayoutAlign="start center">

        <button *ngIf="value == ''" mat-icon-button matTooltip="Взять заявку" (click)="toggleUserGet(row)" aria-label="Toggle important">
            <mat-icon class="green-fg">attach_money</mat-icon>
        </button>

        <button *ngIf="value != ''" mat-icon-button matTooltip="Отказаться от заявки"  (click)="toggleUserGet(row)" aria-label="Toggle important">
            <mat-icon class="red-fg">close</mat-icon> {{value}}
        </button>

    </div>
</ng-template>                                

<ng-template #clientIdTmpl let-row="row" let-value="value">
    <div class="actions" fxLayout="row" fxLayoutAlign="start center">

        <button mat-icon-button matTooltip="Подробнее" (click)="view_details(value)" aria-label="Toggle star">
            {{value}} <mat-icon class="amber-fg">pageview</mat-icon>
        </button>
    </div>
</ng-template>                                


<div id="ngx-datatable" class="page-layout simple fullwidth">

    <!-- CONTENT -->
    <div class="content" layout="row" fusePerfectScrollbar>
        
            <mat-tab-group dynamicHeight>

                <mat-tab label="Все ({{total_all}})">

                    <!-- WIDGET GROUP -->
                    <div class="widget-group grey-100-bg" fxLayout="row wrap" fxFlex="100" *fuseIfOnDom
                         [@animateStagger]="{value:'50'}">
                         <!-- WIDGET 11 -->
                         <fuse-widget [@animate]="{value:'*',params:{y:'100%'}}" class="widget" fxLayout="row"
                            fxFlex="100">
                            <!-- Front -->
                            <div class="fuse-widget-front mat-white-bg mat-elevation-z2" *ngIf="rows">

                                <ngx-datatable
                                    class="material"
                                    [rows]="rows"
                                    [columns]="columns"
                                    [loadingIndicator]="loadingIndicator"
                                    [columnMode]="'force'"
                                    [headerHeight]="48"
                                    [footerHeight]="56"
                                    [rowHeight]="'auto'"
                                    [scrollbarH]="true"
                                    [reorderable]="reorderable"
                                    [limit]="10"
                                    (activate)="onActivate($event)"
                                    [selectionType]="'single'"
                                    (select)='onSelect($event)'
                                    >
                                </ngx-datatable>
                            </div>
                            <!-- / Front -->
                        </fuse-widget>
                        <!-- / WIDGET 11 -->
                    </div>
                    <!-- / WIDGET GROUP -->
                </mat-tab>
                <mat-tab label="Мои ({{total_my}})">
                    <!-- WIDGET GROUP -->
                    <div class="widget-group grey-100-bg" fxLayout="row wrap" fxFlex="100" *fuseIfOnDom
                         [@animateStagger]="{value:'50'}">
                         <!-- WIDGET 11 -->
                         <fuse-widget [@animate]="{value:'*',params:{y:'100%'}}" class="widget" fxLayout="row"
                            fxFlex="100">
                            <!-- Front -->
                            <div class="fuse-widget-front mat-white-bg mat-elevation-z2" *ngIf="rows_my">

                                <ngx-datatable
                                    class="material"
                                    [rows]="rows_my"
                                    [columns]="columns"
                                    [loadingIndicator]="loadingIndicator"
                                    [columnMode]="'force'"
                                    [headerHeight]="48"
                                    [footerHeight]="56"
                                    [rowHeight]="'auto'"
                                    [scrollbarH]="true"
                                    [reorderable]="reorderable"
                                    [limit]="10"
                                    (activate)="onActivate($event)"
                                    >
                                </ngx-datatable>
                            </div>
                            <!-- / Front -->
                        </fuse-widget>
                        <!-- / WIDGET 11 -->
                    </div>
                    <!-- / WIDGET GROUP -->
                </mat-tab>

            </mat-tab-group>

    </div>
    <!-- / CONTENT -->
    <div class="content" layout="row" fusePerfectScrollbar>
        
        <button mat-button (click)="refreash()" matTooltip="Обновить таблицу">Обновить</button>
    </div>


</div>


